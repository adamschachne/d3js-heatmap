<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en">

<style>
	body {
		padding-top: 70px;
		padding-bottom: 30px;
	}
	circle {
		stroke: black;
	}
	.dragging {
		stroke: white;
	}
	.jscolor {
		opacity: 1;
		width: 10px;
		height: 0px;
		pointer-events: none;
		position: absolute;
	}
	svg text {
		cursor: default;
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}
</style>
<head>
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-theme.min.css" rel="stylesheet">
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://d3js.org/d3-axis.v1.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jscolor.js"></script>
</head>



<body>
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Name</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#">Home</a></li>
					<li><a href="#about">About</a></li>
					<li><a href="#contact">Contact</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="#">Action</a></li>
							<li><a href="#">Another action</a></li>
							<li><a href="#">Something else here</a></li>
							<li role="separator" class="divider"></li>
							<li class="dropdown-header">Nav header</li>
							<li><a href="#">Separated link</a></li>
							<li><a href="#">One more separated link</a></li>
						</ul>
					</li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</nav>
	<div class="container theme-showcase" style="width: 970px !important;" role="main">
		<div class="jumbotron" style="padding-top: 10px; padding-bottom: 10px;">
			<h1>sample heatmap layout</h1>
		</div>
		<div id="svgContainer" style=" float: none; margin: 0 auto; border: 3px solid black"></div>
		<div class="row">
			<div class="col-xs-12 col-md-8">.col-xs-12 .col-md-8
				<div class="dropdown">
					<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Dropdown button
					</button>
					<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
						<a class="dropdown-item" href="#">Action</a>
						<a class="dropdown-item" href="#">Another action</a>
						<a class="dropdown-item" href="#">Something else here</a>
					</div>
				</div>
			</div>
			<div class="col-xs-6 col-md-4">.col-xs-6 .col-md-4</div>
		</div>
	</div>
	<!-- <h1></h1>
	<div id="canvasDiv">

	</div>
	<div style="" id="colorScaleDiv">
		<div id="topDiv" style="height: 50px;"> </div>
		<div id="pickerDiv" style="width: 500px; height: 50px">
			<input id="color1" style="left: 25px;" data-jscolor='{closable:true,closeText:"Close me!",shadow: false, required:false, width:100, height: 50, onFineChange:"updateColor(this, circle1)"}' onchange="this.jscolor.hide()" class="jscolor" >
			<input id="color2" style="left: 475px;" data-jscolor='{shadow: false, required:false, width:100, height: 50, onFineChange:"updateColor(this, circle2)"}' onchange="this.jscolor.hide()" class="jscolor" >
		</div>
		<div >
			<button onclick="addPivot()" style="height: 25px; width: 100px;">add new pivot</button>
			<input type="range" min="2" max="100" value="10" id="blockSlider">
			<label>10</label>
		</div>
	</div> -->
</body>

<script>
	//var width = parseInt(d3.select("#svgContainer").select("div").style("width"), 10);
	var margin = {top: 30, right: 120, bottom: 30, left: 50},
	    width = 960 - margin.left - margin.right,
	    height = 500 - margin.top - margin.bottom;
	var heatMapSVG = d3.select("#svgContainer").append("svg")
		.attr("width", 960)
		.attr("height", 500)
		.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
			.style("border", "3px solid black");

	var buckets = [{id:"1"},{id:"2"},{id:"3"},{id:"4"},{id:"5"}];
	// a.forEach(function(element) {
	// 	console.log(element);
	// });
	var x = d3.scaleLinear().range([0, width]),
		y = d3.scaleLinear().range([height, 0]);
	x.domain(d3.extent(buckets, function(d) { return d.id; }));
	// Add an x-axis with label.
	// var axis = d3.axisBottom(x);

	var blocks = heatMapSVG.append("g").selectAll("blocks")
		//.data
		// .append("rect")
		// 	.attr("width",width)
		// 	.attr("height",height)
		// 	.attr("fill", "#EEEEEE")

	heatMapSVG.append("g")
		.attr("class", "x axis")
		.attr("transform", "translate(0," + height + ")")
		.call(d3.axisBottom(x))
	heatMapSVG.append("g")
		.attr("class", "y axis")
		.call(d3.axisLeft(y))

	var colorScale = d3.scaleLinear()
		.domain([0,10]) // input is first and last x-position data
		.range(['#ff0000','#0000ff']);

	// Add a legend for the color values. height 100
	var legendLength = 300;

    var legend = heatMapSVG.append("g")
		.style("border", "1px solid black")
		.attr("transform", "translate("+(width+20)+","+(20)+")");

	legend.selectAll("rect")
		.data([{p:""},{p:""},{p:""},{p:""},{p:""},{p:""},{p:""},{p:""},
			{p:""},{p:""}])
		.enter().append("rect")
			.attr("width", 30)
			.attr("height", 30)
			.attr("x", 0)
			.attr("y", function(d,i) {return i*30})
			.attr("fill", function(d,i) {return colorScale(i)});

	var pivotData = [{y: 0, color: "#ff0000"},{y: legendLength, color: "#0000ff"}];

	legend.selectAll(".pivot")
		.data(pivotData)
			.enter().append("g")
			.each(function(d,i) {
				d3.select(this).attr("transform", "translate(30,"+d.y+")");
			})
			.append("path")
				.style("width", 64)
				.style("height",64)
				.attr("fill","#000000")
				.attr("d","M26 -10 L26 10 L0 0 Z")

	//add text above the legend
	heatMapSVG.append("text")
		.attr("class", "label")
		.attr("x", width + 20)
		.attr("y", 10)
		.attr("dy", ".35em")
		.text("Legend");

	// var numBlocks = 10;
	// var width = 50;
	// var height = 300;
	// var circleOffset = 21;
	// var blockWidth = width/numBlocks;
	// var colorScaleSVG = d3.select("#colorScaleDiv").select("div").append("svg")
	// 	.attr("width", width)
	// 	.attr("height", height);
	//
	// var pickerDiv = d3.select("#pickerDiv");
	// var data = [];
	// var numPivots = 2;
	// var buffer = 1; // makes width larger by this amount to hide any gaps
	// //create groups for rects and circles
	// var rectGroup = colorScaleSVG.append("g");
	//
	// var sliderSVG = pickerDiv.append("svg")
	// 	.attr("width", width+5)
	// 	.attr("height", height);
	//
	// // initial blocks
	// for (var i = 0; i < numBlocks; i++) {
	// 	rectGroup.append("rect")
	// 		.attr("x", i*blockWidth)
	// 		.attr("width", blockWidth+buffer)
	// 		.attr("height", height);
	// 	data.push(i*blockWidth); // data array contains x positions of each block
	// }
	//
	// var drag = d3.drag()
	// 	.on("start", function() { d3.select(this).raise().classed("dragging", true)} )
	// 	.on("drag", function(d) {
	// 		d.x += d3.event.dx
	// 		d3.select(this).attr("cx", function(){
	// 			return d.x;
	// 		})
	// 		d3.select("#"+d.input).style("left", d.x+"px")
	// 		var domain = [];
	// 		var range = [];
	// 		d3.selectAll("circle")
	// 			.sort(function(d1,d2) {
	// 				return d1.x >= d2.x ? 1 : -1;
	// 			})
	// 			.each(function(d) {
	// 				domain.push(d.x);
	// 				range.push("#"+d.color);
	// 			});
	// 		colorScale.domain(domain).range(range);
	// 		update()
	// 	})
	// 	.on("end", function() {
	// 		d3.select(this).classed("dragging", false)
	// 	});
	//
	// //colorScaleSVG.append("circle")
	// sliderSVG.append("circle")
	// 	.data([{x: 25, y: 20, input: "color1", color: "ff0000"}])
	// 	.attr("cx", function(d) {return d.x})
	// 	.attr("cy", function(d) {return d.y})
	// 	.attr("r", "10")
	// 	//.attr("stroke", "#000000") // black outline
	// 	.attr("stroke-width", "2")
	// 	.attr("fill", "#ff0000")
	// 	.attr("id","circle1")
	// 	.on("dblclick", function() {
	// 		document.getElementById("color1").jscolor.show()
	// 	})
	// 	.call(drag);
	//
	//
	// // colorScaleSVG.append("circle")
	// sliderSVG.append("circle")
	// 	.data([{x: 475, y: 25, input: "color2", color: "0000ff"}])
	// 	.attr("cx", function(d) {return d.x})
	// 	.attr("cy", function(d) {return d.y})
	// 	.attr("r", "10")
	// 	.attr("stroke", "#000000") // black outline
	// 	.attr("stroke-width", "2")
	// 	.attr("fill", "#0000ff")
	// 	.attr("id","circle2")
	// 	.on("dblclick", function() {
	// 		document.getElementById("color2").jscolor.show()
	// 	})
	// 	.call(drag);
	//
	// var colorScale = d3.scaleLinear()
	// 	.domain([25,475]) // input is first and last x-position data
	// 	.range(['#ff0000','#0000ff']);
	//
	// var pickers = colorScaleSVG.selectAll("circle")
	//
	// var blocks = rectGroup.selectAll("rect")
	// 	.data(data)
	// 	.attr("fill", function(d) {return colorScale(d)});
	//
	// function addPivot() {
	// 	//colorScaleSVG.append("circle")
	// 	sliderSVG.append("circle")
	// 		.data([{x: width/2, y: 25, input: "color"+(++numPivots), color: "00ff00"}])
	// 		.attr("cx", function(d) {return d.x})
	// 		.attr("cy", function(d) {return d.y})
	// 		.attr("r", "10")
	// 		.attr("stroke", "#000000") // black outline
	// 		.attr("stroke-width", "2")
	// 		.attr("fill", "#00ff00")
	// 		.attr("id","circle"+(numPivots))
	// 		.on("dblclick", function(d) {
	// 			console.log(d.input)
	// 			document.getElementById(d.input).jscolor.show()
	// 		})
	// 		.call(drag);
	//
 // 		pickerDiv.append("input")
	// 		.attr("id","color"+numPivots)
	// 		.style("left", "250px")
	// 		.attr("data-jscolor",'{shadow: false, required:false, width:100, height: 50, onFineChange:"updateColor(this,'+'circle'+numPivots+')"}')
	// 		 //"updateColor(this, color'+numPivots+')"}')
	// 		.attr("onchange", "this.jscolor.hide()")
	// 		.attr("class","jscolor")
	//
	// 	setTimeout(function() {jsc.init()}, 0); // re-initialize jscolor
	//
	// 	var domain = [];
	// 	var range = [];
	// 	d3.selectAll("circle")
	// 		.sort(function(d1,d2) {
	// 			return d1.x >= d2.x ? 1 : -1;
	// 		})
	// 		.each(function(d) {
	// 			domain.push(d.x)
	// 			range.push("#"+d.color)
	// 		});
	// 	colorScale.domain(domain).range(range); // update both the domain and range
	// 	update()
	// }
	//
	// function updateColor(picker, target) {
	// 	d3.select(target)
	// 		.each(function(d) {
	// 			d.color = ""+picker
	// 		})
	// 		.attr("fill", "#"+picker)
	// 	var range = []
	// 	d3.selectAll("circle")
	// 		.sort(function(d1,d2) {
	// 			return d1.x >= d2.x ? 1 : -1;
	// 		})
	// 		.each(function(d) {
	// 			range.push("#"+d.color)
	// 		});
	// 	colorScale.range(range);
	// 	update()
	// }
	//
	// function closeInput() {
	// 	console.log("close")
	// }
	//
	// d3.select("#blockSlider").on("input", function() {
	// 	numBlocks = this.value;
	// 	blockWidth = width/numBlocks;
	// 	d3.select("label").html(this.value);
	// 	data = [];
	// 	for (var i = 0; i < numBlocks; i++) {
	// 		data[i] = i*blockWidth;
	// 	}
	// 	var domain = [];
	// 	d3.selectAll("circle")
	// 		.sort(function(d1,d2) {
	// 			return d1.x >= d2.x ? 1 : -1;
	// 		})
	// 		.each(function(d) {
	// 			domain.push(d.x)
	// 		});
	// 	colorScale.domain(domain);
	// 	//colorScale.domain([data[0],data[data.length-1]]); // input is first and last x-position data
	// 	update();
	// });
	//
	// function update() {
	// 	var blocks = rectGroup.selectAll("rect")
	// 		.data(data)
	// 		.attr("x", function(d) {return d})
	// 		.attr("width", blockWidth+buffer)
	// 		.attr("fill", function(d) {return colorScale(d)});
	// 	blocks.enter().append("rect")
	// 		.attr("x", function(d) {return d})
	// 		.attr("width", blockWidth+buffer)
	// 		.attr("height", height)
	// 		.attr("fill", function(d) {return colorScale(d)});
	// 	blocks.exit().remove();
	// }

</script>

</html>
